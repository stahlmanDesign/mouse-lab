<!DOCTYPE html>
<html lang="fr">

<head>
	<title></title>

	<meta charset="utf-8">

	<!-- bootstrap css file -->
	<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />

	<!-- fontawesome css file -->
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

	<!-- leaflet css -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />



	<!-- custom css -->
	<style type="text/css">

	</style>
</head>

<body>


	<div class="container">
		<div id="content">
			<svg id="Calque_1" data-name="Calque 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
				<defs>
					<style>
						.cls-1 {
							fill: yellow;
							stroke: #000;
							stroke-miterlimit: 10;
						}

						svg {
							background: #d2cdb8
						}
					</style>
				</defs>
				<title>circles</title>
				<circle class="cls-1" cx="27.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="112.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="197.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="282.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="367.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="452.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="537.5" cy="27.5" r="27" />
				<circle class="cls-1" cx="27.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="112.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="197.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="282.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="367.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="452.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="537.5" cy="110.5" r="27" />
				<circle class="cls-1" cx="27.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="112.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="197.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="282.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="367.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="452.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="537.5" cy="193.5" r="27" />
				<circle class="cls-1" cx="27.5" cy="276.5" r="27" />
				<circle class="cls-1" cx="112.5" cy="276.5" r="27" />
				<circle class="cls-1" cx="197.5" cy="276.5" r="27" />
				<circle class="cls-1" cx="282.5" cy="276.5" r="27" />
				<circle class="cls-1" cx="367.5" cy="276.5" r="27" />
				<circle class="cls-1" cx="452.5" cy="276.5" r="27" />
				<circle class="cls-1" cx="537.5" cy="276.5" r="27" />
			</svg>
		</div>
	</div>
	<!-- reload browser when files change -->
	<script type="text/javascript" src="http://livejs.com/live.js"></script>

	<!-- jquery.min.js  -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

	<!-- underscore javascript utility libirary -->
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>

	<!-- bootstrap js file -->
	<script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

	<!-- leaflet js -->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>

	<!-- d3 -->
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

	<!-- queue for deferring loaded data -->
	<script src="http://d3js.org/queue.v1.min.js"></script>


	<script type="text/javascript">
		//$("#content").html("asdf")
		//var dat = _.sample(_.range(250), 16)

		var svg = d3.select("svg")

		var circles = svg.selectAll("circle")
			//.data(dat) // bind data


		//trans(dat);


		setInterval(function() {

			var length = _.sample(_.range(20));

			var rndData = _.sample(_.range(20), length + 5)
			trans(rndData)
		}, 1000)

		function trans(data) {
			circles = svg.selectAll("circle")
			console.log(data)

			circles.data(data)
				.enter().append("circle") // add circles if not enough

			var rowFactor = 1;


			circles.transition() // apply changes to all
				// .attr("cx", function(d, i) {
				//
				// 	if (i >= 7 && i < 14) rowFactor = 7
				// 	if (i >= 14 && i < 21) rowFactor = 14
				// 	if (i >= 21 && i < 28) rowFactor = 21
				// 	if (i >= 28 && i < 35) rowFactor = 28
				//
				// 	return (-i) + 25 // first one is 0
				// })
				// .attr("cy", function(d, i) {
				//
				// 	if (i >= 7 && i < 14) rowFactor = 2
				// 	if (i >= 14 && i < 21) rowFactor = 3
				// 	if (i >= 21 && i < 28) rowFactor = 4
				// 	if (i >= 28 && i < 35) rowFactor = 5
				// 	return 50 * rowFactor;
				// })
				.attr("r", function(d) {
					return d;
				})
				// .style("fill", function(d) {
				// 	return "green"
				// })

				// take whatever is left over in the selection after the data length has reached its end, and affect the object. Remove will destory coordinates that you may want if you update with more data
			circles.data(data).exit().transition().attr("r", function(d) {
				return 0;
			})//.remove(); // exit cannot be chained to enter; also must tell which data join

		}
	</script>


</body>

</html>
